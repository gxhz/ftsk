<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>

<%@include file="../head1.jsp" %> 

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>实时信息</title>

</head>

<body>
    <div style="position:absolute;width:1670px;height:976px;background:url(../images/bxgc.jpg);overflow:auto;">
    
        <div style="position:absolute;left:572px;top:225px;width:19px;height:13px;cursor:pointer;" onclick="showMsg('W11');">
            <div style="border:1px solid #0099ff;position:absolute;width:30px;height:19px;left:0px;top:-20px;background:#0099ff;" align="center">
                <span style="color:#ffffff;text-align:center; ">W11</span>
            </div>
            <div style="border:1px solid #0099ff;position:absolute;width:60px;height:19px;left:32px;top:-20px;background:#ffffff;" align="center">
                <span style="color:#000000;text-align:center; " id ="W11">0</span>
            </div>
        </div>
        
        <div style="position:absolute;left:655px;top:310px;width:19px;height:13px;cursor:pointer;" onclick="showMsg('W12');">
            <div style="border:1px solid #0099ff;position:absolute;width:30px;height:19px;left:0px;top:-20px;background:#0099ff;" align="center">
                <span style="color:#ffffff;text-align:center; ">W12</span>
            </div>
            <div style="border:1px solid #0099ff;position:absolute;width:60px;height:19px;left:32px;top:-20px;background:#ffffff;" align="center">
                <span style="color:#000000;text-align:center; " id ="W12">0</span>
            </div>
        </div>
        
        <div style="position:absolute;left:760px;top:415px;width:19px;height:13px;cursor:pointer;" onclick="showMsg('W13');">
            <div style="border:1px solid #0099ff;position:absolute;width:30px;height:19px;left:0px;top:-20px;background:#0099ff;" align="center">
                <span style="color:#ffffff;text-align:center; ">W13</span>
            </div>
            <div style="border:1px solid #0099ff;position:absolute;width:60px;height:19px;left:32px;top:-20px;background:#ffffff;" align="center">
                <span style="color:#000000;text-align:center; " id ="W13">0</span>
            </div>
        </div>
        
        
        
        
        <div style="position:absolute;left:532px;top:275px;width:19px;height:13px;cursor:pointer;" onclick="showMsg('W21');">
            <div style="border:1px solid #0099ff;position:absolute;width:30px;height:19px;left:0px;top:-20px;background:#0099ff;" align="center">
                <span style="color:#ffffff;text-align:center; ">W21</span>
            </div>
            <div style="border:1px solid #0099ff;position:absolute;width:60px;height:19px;left:32px;top:-20px;background:#ffffff;" align="center">
                <span style="color:#000000;text-align:center; " id ="W21">0</span>
            </div>
        </div>
        
        <div style="position:absolute;left:615px;top:360px;width:19px;height:13px;cursor:pointer;" onclick="showMsg('W22');">
            <div style="border:1px solid #0099ff;position:absolute;width:30px;height:19px;left:0px;top:-20px;background:#0099ff;" align="center">
                <span style="color:#ffffff;text-align:center; ">W22</span>
            </div>
            <div style="border:1px solid #0099ff;position:absolute;width:60px;height:19px;left:32px;top:-20px;background:#ffffff;" align="center">
                <span style="color:#000000;text-align:center; " id ="W22">0</span>
            </div>
        </div>
        
        <div style="position:absolute;left:720px;top:465px;width:19px;height:13px;cursor:pointer;" onclick="showMsg('W23');">
            <div style="border:1px solid #0099ff;position:absolute;width:30px;height:19px;left:0px;top:-20px;background:#0099ff;" align="center">
                <span style="color:#ffffff;text-align:center; ">W23</span>
            </div>
            <div style="border:1px solid #0099ff;position:absolute;width:60px;height:19px;left:32px;top:-20px;background:#ffffff;" align="center">
                <span style="color:#000000;text-align:center; " id ="W23">0</span>
            </div>
        </div>
        
        
        
        
        <div style="position:absolute;left:482px;top:325px;width:19px;height:13px;cursor:pointer;" onclick="showMsg('W31');">
            <div style="border:1px solid #0099ff;position:absolute;width:30px;height:19px;left:0px;top:-20px;background:#0099ff;" align="center">
                <span style="color:#ffffff;text-align:center; ">W31</span>
            </div>
            <div style="border:1px solid #0099ff;position:absolute;width:60px;height:19px;left:32px;top:-20px;background:#ffffff;" align="center">
                <span style="color:#000000;text-align:center; " id ="W31">0</span>
            </div>
        </div>
        
        <div style="position:absolute;left:565px;top:410px;width:19px;height:13px;cursor:pointer;" onclick="showMsg('W32');">
            <div style="border:1px solid #0099ff;position:absolute;width:30px;height:19px;left:0px;top:-20px;background:#0099ff;" align="center">
                <span style="color:#ffffff;text-align:center; ">W32</span>
            </div>
            <div style="border:1px solid #0099ff;position:absolute;width:60px;height:19px;left:32px;top:-20px;background:#ffffff;" align="center">
                <span style="color:#000000;text-align:center; " id ="W32">0</span>
            </div>
        </div>
        
        <div style="position:absolute;left:670px;top:515px;width:19px;height:13px;cursor:pointer;" onclick="showMsg('W33');">
            <div style="border:1px solid #0099ff;position:absolute;width:30px;height:19px;left:0px;top:-20px;background:#0099ff;" align="center">
                <span style="color:#ffffff;text-align:center; ">W33</span>
            </div>
            <div style="border:1px solid #0099ff;position:absolute;width:60px;height:19px;left:32px;top:-20px;background:#ffffff;" align="center">
                <span style="color:#000000;text-align:center; " id ="W33">0</span>
            </div>
        </div>
        
        
        
        
        
        <div style="position:absolute;left:435px;top:375px;width:19px;height:13px;cursor:pointer;" onclick="showMsg('W41');">
            <div style="border:1px solid #0099ff;position:absolute;width:30px;height:19px;left:0px;top:-20px;background:#0099ff;" align="center">
                <span style="color:#ffffff;text-align:center; ">W41</span>
            </div>
            <div style="border:1px solid #0099ff;position:absolute;width:60px;height:19px;left:32px;top:-20px;background:#ffffff;" align="center">
                <span style="color:#000000;text-align:center; " id ="W41">0</span>
            </div>
        </div>
        
        <div style="position:absolute;left:518px;top:460px;width:19px;height:13px;cursor:pointer;" onclick="showMsg('W42');">
            <div style="border:1px solid #0099ff;position:absolute;width:30px;height:19px;left:0px;top:-20px;background:#0099ff;" align="center">
                <span style="color:#ffffff;text-align:center; ">W42</span>
            </div>
            <div style="border:1px solid #0099ff;position:absolute;width:60px;height:19px;left:32px;top:-20px;background:#ffffff;" align="center">
                <span style="color:#000000;text-align:center; " id ="W42">0</span>
            </div>
        </div>
        
        <div style="position:absolute;left:623px;top:565px;width:19px;height:13px;cursor:pointer;" onclick="showMsg('W43');">
            <div style="border:1px solid #0099ff;position:absolute;width:30px;height:19px;left:0px;top:-20px;background:#0099ff;" align="center">
                <span style="color:#ffffff;text-align:center; ">W43</span>
            </div>
            <div style="border:1px solid #0099ff;position:absolute;width:60px;height:19px;left:32px;top:-20px;background:#ffffff;" align="center">
                <span style="color:#000000;text-align:center; " id ="W43">0</span>
            </div>
        </div>
        
        
        
        
        
        <div style="position:absolute;left:395px;top:415px;width:19px;height:13px;cursor:pointer;" onclick="showMsg('W51');">
            <div style="border:1px solid #0099ff;position:absolute;width:30px;height:19px;left:0px;top:-20px;background:#0099ff;" align="center">
                <span style="color:#ffffff;text-align:center; ">W51</span>
            </div>
            <div style="border:1px solid #0099ff;position:absolute;width:60px;height:19px;left:32px;top:-20px;background:#ffffff;" align="center">
                <span style="color:#000000;text-align:center; " id ="W51">0</span>
            </div>
        </div>
        
        <div style="position:absolute;left:478px;top:500px;width:19px;height:13px;cursor:pointer;" onclick="showMsg('W52');">
            <div style="border:1px solid #0099ff;position:absolute;width:30px;height:19px;left:0px;top:-20px;background:#0099ff;" align="center">
                <span style="color:#ffffff;text-align:center; ">W52</span>
            </div>
            <div style="border:1px solid #0099ff;position:absolute;width:60px;height:19px;left:32px;top:-20px;background:#ffffff;" align="center">
                <span style="color:#000000;text-align:center; " id ="W52">0</span>
            </div>
        </div>
        
        <div style="position:absolute;left:583px;top:605px;width:19px;height:13px;cursor:pointer;" onclick="showMsg('W53');">
            <div style="border:1px solid #0099ff;position:absolute;width:30px;height:19px;left:0px;top:-20px;background:#0099ff;" align="center">
                <span style="color:#ffffff;text-align:center; ">W53</span>
            </div>
            <div style="border:1px solid #0099ff;position:absolute;width:60px;height:19px;left:32px;top:-20px;background:#ffffff;" align="center">
                <span style="color:#000000;text-align:center; " id ="W53">0</span>
            </div>
        </div>
        
        
        
        
        
        
        <div style="position:absolute;left:345px;top:465px;width:19px;height:13px;cursor:pointer;" onclick="showMsg('W61');">
            <div style="border:1px solid #0099ff;position:absolute;width:30px;height:19px;left:0px;top:-20px;background:#0099ff;" align="center">
                <span style="color:#ffffff;text-align:center; ">W61</span>
            </div>
            <div style="border:1px solid #0099ff;position:absolute;width:60px;height:19px;left:32px;top:-20px;background:#ffffff;" align="center">
                <span style="color:#000000;text-align:center; " id ="W61">0</span>
            </div>
        </div>
        
        <div style="position:absolute;left:428px;top:550px;width:19px;height:13px;cursor:pointer;" onclick="showMsg('W62');">
            <div style="border:1px solid #0099ff;position:absolute;width:30px;height:19px;left:0px;top:-20px;background:#0099ff;" align="center">
                <span style="color:#ffffff;text-align:center; ">W62</span>
            </div>
            <div style="border:1px solid #0099ff;position:absolute;width:60px;height:19px;left:32px;top:-20px;background:#ffffff;" align="center">
                <span style="color:#000000;text-align:center; " id ="W62">0</span>
            </div>
        </div>
        
        <div style="position:absolute;left:533px;top:655px;width:19px;height:13px;cursor:pointer;" onclick="showMsg('W63');">
            <div style="border:1px solid #0099ff;position:absolute;width:30px;height:19px;left:0px;top:-20px;background:#0099ff;" align="center">
                <span style="color:#ffffff;text-align:center; ">W63</span>
            </div>
            <div style="border:1px solid #0099ff;position:absolute;width:60px;height:19px;left:32px;top:-20px;background:#ffffff;" align="center">
                <span style="color:#000000;text-align:center; " id ="W63">0</span>
            </div>
        </div>
        
        
        
        
        
        <div style="position:absolute;left:1200px;top:480px;width:19px;height:13px;cursor:pointer;" onclick="showMsg('WA1');">
            <div style="border:1px solid #0099ff;position:absolute;width:30px;height:19px;left:0px;top:-20px;background:#0099ff;" align="center">
                <span style="color:#ffffff;text-align:center; ">WA1</span>
            </div>
            <div style="border:1px solid #0099ff;position:absolute;width:60px;height:19px;left:32px;top:-20px;background:#ffffff;" align="center">
                <span style="color:#000000;text-align:center; " id ="WA1">0</span>
            </div>
        </div>
        
        <div style="position:absolute;left:1295px;top:480px;width:19px;height:13px;cursor:pointer;" onclick="showMsg('WA2');">
            <div style="border:1px solid #0099ff;position:absolute;width:30px;height:19px;left:0px;top:-20px;background:#0099ff;" align="center">
                <span style="color:#ffffff;text-align:center; ">WA2</span>
            </div>
            <div style="border:1px solid #0099ff;position:absolute;width:60px;height:19px;left:32px;top:-20px;background:#ffffff;" align="center">
                <span style="color:#000000;text-align:center; " id ="WA2">0</span>
            </div>
        </div>
        
        <div style="position:absolute;left:1390px;top:480px;width:19px;height:13px;cursor:pointer;" onclick="showMsg('WA3');">
            <div style="border:1px solid #0099ff;position:absolute;width:30px;height:19px;left:0px;top:-20px;background:#0099ff;" align="center">
                <span style="color:#ffffff;text-align:center; ">WA3</span>
            </div>
            <div style="border:1px solid #0099ff;position:absolute;width:60px;height:19px;left:32px;top:-20px;background:#ffffff;" align="center">
                <span style="color:#000000;text-align:center; " id ="WA3">0</span>
            </div>
        </div>
        
        
        
        
        <div style="position:absolute;left:1200px;top:502px;width:19px;height:13px;cursor:pointer;" onclick="showMsg('WB1');">
            <div style="border:1px solid #0099ff;position:absolute;width:30px;height:19px;left:0px;top:-20px;background:#0099ff;" align="center">
                <span style="color:#ffffff;text-align:center; ">WB1</span>
            </div>
            <div style="border:1px solid #0099ff;position:absolute;width:60px;height:19px;left:32px;top:-20px;background:#ffffff;" align="center">
                <span style="color:#000000;text-align:center; " id ="WB1">0</span>
            </div>
        </div>
        
        <div style="position:absolute;left:1295px;top:502px;width:19px;height:13px;cursor:pointer;" onclick="showMsg('WB2');">
            <div style="border:1px solid #0099ff;position:absolute;width:30px;height:19px;left:0px;top:-20px;background:#0099ff;" align="center">
                <span style="color:#ffffff;text-align:center; ">WB2</span>
            </div>
            <div style="border:1px solid #0099ff;position:absolute;width:60px;height:19px;left:32px;top:-20px;background:#ffffff;" align="center">
                <span style="color:#000000;text-align:center; " id ="WB2">0</span>
            </div>
        </div>
        
        <div style="position:absolute;left:1390px;top:502px;width:19px;height:13px;cursor:pointer;" onclick="showMsg('WB3');">
            <div style="border:1px solid #0099ff;position:absolute;width:30px;height:19px;left:0px;top:-20px;background:#0099ff;" align="center">
                <span style="color:#ffffff;text-align:center; ">WB3</span>
            </div>
            <div style="border:1px solid #0099ff;position:absolute;width:60px;height:19px;left:32px;top:-20px;background:#ffffff;" align="center">
                <span style="color:#000000;text-align:center; " id ="WB3">0</span>
            </div>
        </div>
        
        
        
        
        <div style="position:absolute;left:1200px;top:524px;width:19px;height:13px;cursor:pointer;" onclick="showMsg('WC1');">
            <div style="border:1px solid #0099ff;position:absolute;width:30px;height:19px;left:0px;top:-20px;background:#0099ff;" align="center">
                <span style="color:#ffffff;text-align:center; ">WC1</span>
            </div>
            <div style="border:1px solid #0099ff;position:absolute;width:60px;height:19px;left:32px;top:-20px;background:#ffffff;" align="center">
                <span style="color:#000000;text-align:center; " id ="WC1">0</span>
            </div>
        </div>
        
        <div style="position:absolute;left:1295px;top:524px;width:19px;height:13px;cursor:pointer;" onclick="showMsg('WC2');">
            <div style="border:1px solid #0099ff;position:absolute;width:30px;height:19px;left:0px;top:-20px;background:#0099ff;" align="center">
                <span style="color:#ffffff;text-align:center; ">WC2</span>
            </div>
            <div style="border:1px solid #0099ff;position:absolute;width:60px;height:19px;left:32px;top:-20px;background:#ffffff;" align="center">
                <span style="color:#000000;text-align:center; " id ="WC2">0</span>
            </div>
        </div>
        
        <div style="position:absolute;left:1390px;top:524px;width:19px;height:13px;cursor:pointer;" onclick="showMsg('WC3');">
            <div style="border:1px solid #0099ff;position:absolute;width:30px;height:19px;left:0px;top:-20px;background:#0099ff;" align="center">
                <span style="color:#ffffff;text-align:center; ">WC3</span>
            </div>
            <div style="border:1px solid #0099ff;position:absolute;width:60px;height:19px;left:32px;top:-20px;background:#ffffff;" align="center">
                <span style="color:#000000;text-align:center; " id ="WC3">0</span>
            </div>
        </div>
        
    </div> 
    
    <!-- 
    <div style="position: fixed;bottom: 20px;right: 40px;z-index: 888; border:#000000 0px dashed; padding: 5px;">
        <a href="#" class="easyui-linkbutton" style="width:120px;height:35px" onclick="showDetailList()" >详细列表</a>
    </div>
     -->
     
    <div style="position: fixed;top: 130px;left: 40px;z-index: 888; border:#000000 0px dashed; padding: 5px;">
        <p style="color:#000000">观测类型选择</p>
        <input id="bxgcname" class="easyui-combobox" style="width:120px;height:28px"
            data-options="
                    url: '../jsonfile/bxgcname.json',
                    method:'get',
                    valueField:'value',
                    textField:'text',
                    panelHeight:'auto',
                    editable:false
            ">
    </div>
    
    <div id="w" class="easyui-window" title="观测点信息" 
        data-options="modal:true,closed:true,collapsible:false,minimizable:false,maximizable:false"
        style="width:500px;height:200px;padding:10px;">
    </div>
    
    <div id="w_detail" class="easyui-window" title="观测点详细信息列表" 
        data-options="modal:true,closed:true,collapsible:false,minimizable:false,maximizable:false"
        style="width:1600px;height:800px;padding:10px;">
        
        <div class="easyui-layout" style="width:100%;height:100%">
        
            <div data-options="region:'center',border:false">
                <table id="gcd" class="easyui-datagrid" pagination="false" fit="true" fitColumns="true"
                     url="GetBXRTData" rownumbers="true" singleSelect="true" pageSize="200">
                    <thead>
                        <tr>
                          <th field="name" width="120">名称</th>
                          <th field="zjwy" width="120">正镜位移</th>
                          <th field="djwy" width="120">倒镜位移</th>
                          <th field="pjz" width="120">平均值</th>
                        </tr>
                    </thead>
                </table>
            </div>
        
        </div>
        
    </div>
          
</body>

<script type="text/javascript">

    window.onload = function () {
    	$('#bxgcname').combobox('setValue', "hoffset");
    };

	//显示详细信息列表
	function showDetailList() {
		$('#gcd').datagrid('load',{
			name: ''
		});
		
		$('#w_detail').window('open');
	}
	
	//onChange事件
	$("#bxgcname").combobox({
        onChange: function(n,o){
        	var value=n;
        	//获取所有观测点实时数据
        	$.ajax({
        		type: 'post',
        		url: 'GetBXRTData',
        		dataType: 'json',
        	    ContentType: 'application/json; charset=utf-8',
        		cache: true,
        		async: true,
        		data: {'name': ''},
        		success:function(data){
        			for(var i = 0;i < data.length;i++){
        				var datadiv=document.getElementById(data[i].name);
        				if(datadiv != null) {
        					if(value == 'hoffset') {
        						datadiv.innerText = data[i].hoffset;
        					} else if(value == 'voffset') {
        						datadiv.innerText = data[i].voffset;
        					} else if(value == 'zoffset') {
        						datadiv.innerText = data[i].zoffset;
        					}
        				}
        			}
        		}
          	});
        }
    });
	
	
	//显示观测点详细参数
	function showMsg(name) {
		load('正在获取数据，请稍候...');
		
		$.ajax({
			type: 'post',
			url: 'GetBXRTData',
			dataType: 'json',
		    ContentType: 'application/json; charset=utf-8',
			cache: true,
			async: true,
			data: {'name': name},
			success:function(data){
				disload();  //关闭等待框
				
				if(data.length > 0){
				    var content = 
						'<style type="text/css">'+
							'table.gridtable {'+
								'font-family: verdana,arial,sans-serif;'+
								'font-size:15px;'+
								'color:#333333;'+
								'border-width: 1px;'+
								'border-color: #666666;'+
								'border-collapse: collapse;'+
								'width:460px;'+
							'}'+
							'table.gridtable td {'+
								'border-width: 1px;'+
								'padding: 5px;'+
								'border-style: solid;'+
								'border-color: #666666;'+
								'background-color: #ffffff;'+
							'}'+
						'</style>'+
						'<div style="margin:0;line-height:20px;padding:2px;font-size:18px;color:#3A5FCD;">'+
							'<table class="gridtable">'+
								'<tr>'+
									'<td>观测点名称：'+ data[0].name +'</td>'+
									'<td>横向水平位移：'+  data[0].hoffset +'</td>'+
								'</tr>'+
								'<tr>'+
									'<td>纵向水平位移：'+ data[0].voffset +'</td>'+
									'<td>竖向位移：'+ data[0].zoffset +'</td>'+
								'</tr>'+
							'</table>'+
						'</div>';
					document.getElementById('w').innerHTML = content;
				}
				
				$('#w').panel({title: name+" 观测点"});
				$('#w').window('open');
			}, 
			error: function(e) { 
				disload();  //关闭等待框
			} 
	  	});
	}
	
	
</script>

</html>